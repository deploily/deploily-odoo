<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <template id="cibepay_report_saleorder_document" name="Payment Status" inherit_id="sale.report_saleorder_document">
        <xpath expr="//div[contains(@id, 'informations')]" position="replace">
            <div class="col-md mb-4" id="informations">
                <div t-if="doc.client_order_ref" class="row" name="informations_reference">
                    <div>
                        <strong>Your Reference</strong>
                    </div>
                    <div t-field="doc.client_order_ref">SO0000</div>
                </div>
                <div t-if="doc.date_order" class="row" name="informations_date">
                    <div class="col-4" t-if="is_proforma">
                        <strong>Issued Date</strong>
                    </div>
                    <div class="col-4" t-elif="doc.state in ['draft', 'sent']">
                        <strong>Quotation Date</strong>
                    </div>
                    <div class="col-4" t-else="">
                        <strong>Order Date</strong>
                    </div>
                    <div class="col-4" t-field="doc.date_order" t-options='{"widget": "date"}'>2023-12-31</div>
                </div>

                <div t-if="doc.validity_date and doc.state in ['draft', 'sent']"
                    class="col"
                    name="expiration_date">
                    <div class="col-4">
                        <strong>Expiration</strong>
                    </div>
                    <div class="col-4" t-field="doc.validity_date">2023-12-31</div>
                </div>
                <div t-if="doc.user_id.name" class="row">
                    <div class="col-4">
                        <strong>Salesperson</strong>
                    </div>
                    <div class="col-4" t-field="doc.user_id">Mitchell Admin</div>
                </div>

                <t t-set="tx" t-value="([t for t in doc.transaction_ids if t.state== 'done'] or [None])[0]"></t>
                <t t-if="tx">
                    <div t-if="tx.provider_code" class="row">
                        <div class="col-4">
                            <strong>Payment method</strong>
                        </div>
                        <div class="col-4" t-field="tx.provider_id.name"></div>
                    </div>
                    <div t-if="tx.cibepay_mdorder" class="row">
                        <div class="col-4">
                            <strong>Satim order id</strong>
                        </div>
                        <div class="col-4" t-field="tx.cibepay_mdorder"></div>
                    </div>
                    <div t-if="tx.create_date" class="row">
                        <div class="col-4">
                            <strong>Transaction date an time</strong>
                        </div>
                        <div class="col-4" t-field="tx.create_date"></div>
                    </div>
                    <div t-if="tx.cibepay_resp_code_desc" class="row">
                        <div class="col-4">
                            <strong>Response code</strong>
                        </div>
                        <div class="col-4" t-field="tx.cibepay_resp_code_desc"></div>
                    </div>
                </t>
            </div>
        </xpath>
        <xpath expr="//div[@class='page']" position="inside">
            <div>
                <div class="">
                    <span> En cas de problème de paiement, veuillez contacter le numéro vert de la SATIM
                    </span>
                </div>
                <div class="d-flex justify-content-center mt-4">
                    <img src="/deploily_epayment/static/src/images/satim_3020_image.png" height="50" width="110" alt="numero vert SATIM" />
                    <img src="/deploily_epayment/static/src/images/logo_cib.png" height="47" alt="logo CIB" />
                </div>
            </div>
        </xpath>
    </template>
</odoo>